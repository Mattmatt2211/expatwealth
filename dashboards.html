<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ExpatWealth Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white font-sans">

  <div id="global-header"></div>

  <main class="p-6 space-y-12 max-w-6xl mx-auto">

    <!-- Wallet Cards -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Your Wallets</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-indigo-600 text-white p-6 rounded-2xl shadow">
          <h3 class="text-lg font-medium">USD Balance</h3>
          <p class="text-2xl font-bold mt-2" id="usd-balance">$3,250.00</p>
        </div>
        <div class="bg-emerald-600 text-white p-6 rounded-2xl shadow">
          <h3 class="text-lg font-medium">EUR Balance</h3>
          <p class="text-2xl font-bold mt-2">€2,115.40</p>
        </div>
        <div class="bg-yellow-500 text-white p-6 rounded-2xl shadow">
          <h3 class="text-lg font-medium">JPY Balance</h3>
          <p class="text-2xl font-bold mt-2">¥432,000</p>
        </div>
      </div>
    </section>

    <!-- Add Salary -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Add Salary / Income</h2>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow flex flex-col sm:flex-row gap-4">
        <input type="number" id="salary-input" placeholder="Enter income amount" class="flex-1 p-3 rounded border dark:bg-gray-700 dark:border-gray-600" />
        <button onclick="addSalary()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded">+ Add</button>
      </div>
    </section>

    <!-- Add Expense -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Add Expense</h2>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow space-y-4">
        <input type="text" id="expense-desc" placeholder="Description" class="w-full p-3 rounded border dark:bg-gray-700 dark:border-gray-600" />
        <input type="number" id="expense-amount" placeholder="Amount" class="w-full p-3 rounded border dark:bg-gray-700 dark:border-gray-600" />
        <select id="expense-category" class="w-full p-3 rounded border dark:bg-gray-700 dark:border-gray-600">
          <option>Food</option>
          <option>Housing</option>
          <option>Transportation</option>
          <option>Entertainment</option>
          <option>Other</option>
        </select>
        <button onclick="addExpense()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded">+ Add Expense</button>
      </div>
    </section>

    <!-- Currency Converter -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Currency Converter</h2>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow grid grid-cols-1 md:grid-cols-3 gap-4">
        <input type="number" id="convert-amount" placeholder="Amount" class="p-3 rounded border dark:bg-gray-700 dark:border-gray-600" />
        <select id="from-currency" class="p-3 rounded border dark:bg-gray-700 dark:border-gray-600">
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="JPY">JPY</option>
        </select>
        <select id="to-currency" class="p-3 rounded border dark:bg-gray-700 dark:border-gray-600">
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="JPY">JPY</option>
        </select>
        <button onclick="convertCurrency()" class="col-span-1 md:col-span-3 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded">Convert</button>
        <div id="conversion-result" class="col-span-1 md:col-span-3 text-center mt-2 text-lg font-semibold text-green-500"></div>
      </div>
    </section>

    <!-- Expense Summary -->
    <section>
      <h2 class="text-2xl font-semibold mb-4">Monthly Spending Summary</h2>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow space-y-3" id="expense-list">
        <p class="text-gray-500">No expenses yet.</p>
      </div>
    </section>

  </main>

  <script>
    let currentUSDBalance = 3250;

    function addSalary() {
      const input = document.getElementById("salary-input");
      const amount = parseFloat(input.value);
      if (!isNaN(amount)) {
        currentUSDBalance += amount;
        document.getElementById("usd-balance").textContent = `$${currentUSDBalance.toFixed(2)}`;
        input.value = "";
      }
    }

    function addExpense() {
      const desc = document.getElementById("expense-desc").value.trim();
      const amount = parseFloat(document.getElementById("expense-amount").value);
      const category = document.getElementById("expense-category").value;
      const list = document.getElementById("expense-list");

      if (desc && !isNaN(amount)) {
        const entry = document.createElement("div");
        entry.className = "flex justify-between border-b py-2";
        entry.innerHTML = `<span>${desc} (${category})</span><span>$${amount.toFixed(2)}</span>`;
        list.appendChild(entry);
        document.getElementById("expense-desc").value = "";
        document.getElementById("expense-amount").value = "";
      }
    }

    async function convertCurrency() {
      const amount = parseFloat(document.getElementById("convert-amount").value);
      const from = document.getElementById("from-currency").value;
      const to = document.getElementById("to-currency").value;
      const resultEl = document.getElementById("conversion-result");

      if (isNaN(amount)) return resultEl.textContent = "Enter a valid amount";

      const response = await fetch('/api/convert', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ amount, from, to })
      });

      const data = await response.json();
      resultEl.textContent = `${amount} ${from} = ${data.converted} ${to}`;
    }
  </script>

  <script src="/header.js"></script>

</body>
</html>


